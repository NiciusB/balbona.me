{"version":3,"sources":["../node_modules/conway-engine/dist/index.js","js/conway-playground.js"],"names":["t","i","exports","module","define","amd","self","ConwayJs","a","o","x","y","alive","aliveLastTick","window","global","l","importState","n","s","length","Date","e","r","h","toString","charCodeAt","version","uint32","fract53","args","exportState","Array","prototype","slice","call","arguments","options","width","height","seed","now","initialWorld","rulestring","enableLastTickInfo","wrapOnEdges","__initializeWorld","lookupTable","split","map","parseInt","repeat","indexOf","push","world","isArray","Error","__oldState","__set_oldState_withWrap","__set_oldState_noWrap","tick","gameSize","conwayPlayground","document","getElementById","style","imageRendering","border","marginTop","verticalAlign","game","ctx","getContext","createNewGame","clearRect","draw","fillStyle","cell","fillRect","addEventListener","isScrolledIntoView","delta","fps","then","interval","controlledFPS","requestAnimationFrame","elem","docViewTop","scrollY","docViewBottom","innerHeight","elemTop","offsetTop","elemBottom","offsetHeight"],"mappings":"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","file":"conway-playground.c3d80778.js","sourceRoot":"../src","sourcesContent":["!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).ConwayJs=i()}(this,function(){\"use strict\";var a=function(t,i,o){this.x=t,this.y=i,this.alive=o,this.aliveLastTick=null};\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self&&self;var t,l=(function(t,i){t.exports=function(){return o.importState=function(t){var i=new o;return i.importState(t),i},o;function o(){return function(t){var i=0,o=0,n=0,s=1;0==t.length&&(t=[+new Date]);var e,r,h=(e=4022871197,(r=function(t){t=t.toString();for(var i=0;i<t.length;i++){var o=.02519603282416938*(e+=t.charCodeAt(i));o-=e=o>>>0,e=(o*=e)>>>0,e+=4294967296*(o-=e)}return 2.3283064365386963e-10*(e>>>0)}).version=\"Mash 0.9\",r);i=h(\" \"),o=h(\" \"),n=h(\" \");for(var a=0;a<t.length;a++)(i-=h(t[a]))<0&&(i+=1),(o-=h(t[a]))<0&&(o+=1),(n-=h(t[a]))<0&&(n+=1);h=null;var l=function(){var t=2091639*i+2.3283064365386963e-10*s;return i=o,o=n,n=t-(s=0|t)};return l.uint32=function(){return 4294967296*l()},l.fract53=function(){return l()+11102230246251565e-32*(2097152*l()|0)},l.version=\"Alea 0.9\",l.args=t,l.exportState=function(){return[i,o,n,s]},l.importState=function(t){i=+t[0]||0,o=+t[1]||0,n=+t[2]||0,s=+t[3]||0},l}(Array.prototype.slice.call(arguments))}}()}(t={exports:{}},t.exports),t.exports);return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options=t,void 0===this.options.width&&(this.options.width=100),void 0===this.options.height&&(this.options.height=100),void 0===this.options.seed&&(this.options.seed=Date.now()),void 0===this.options.initialWorld&&(this.options.initialWorld=!1),void 0===this.options.rulestring&&(this.options.rulestring=\"B3/S23\"),void 0===this.options.enableLastTickInfo&&(this.options.enableLastTickInfo=!1),void 0===this.options.wrapOnEdges&&(this.options.wrapOnEdges=!1),this.__initializeWorld=function(t,i){this.lookupTable=function(t){for(var i=t.split(\"/\")[0].slice(1,1/0).split(\"\").map(function(t){return parseInt(t)}),o=t.split(\"/\")[1].slice(1,1/0).split(\"\").map(function(t){return parseInt(t)}),n=[],s=0;s<512;s++){var e=s.toString(2),r=\"1\"===(e=\"0\".repeat(9-e.length)+e)[4],h=e.split(\"1\").length-1-(r?1:0),a=null;a=r?-1!==o.indexOf(h):-1!==i.indexOf(h),n.push(a)}return n}(this.options.rulestring);var o=null;this.options.initialWorld||(o=new l(this.options.seed)),this.world=[];for(var n=0;n<i;n++){this.world.push([]);for(var s=0;s<t;s++){var e=null;if(this.options.initialWorld)if(\"function\"==typeof this.options.initialWorld)e=this.options.initialWorld(n,s);else{if(!Array.isArray(this.options.initialWorld[n])||\"undefined\"===this.options.initialWorld[n][s])throw new Error(\"[conway-engine] Invalid initialWorld option\");e=this.options.initialWorld[n][s]}else e=o()<.2;this.world[n].push(new a(s,n,e))}}this.__oldState=[];for(var r=0;r<i+2;r++){this.__oldState.push([]);for(var h=0;h<t+2;h++)this.__oldState[r].push(!1)}},this.__set_oldState_withWrap=function(){for(var t=0;t<this.height+2;t++){var i=t-1;if(0===t?i=this.height-1:t===this.height+1&&(i=0),this.world[i])for(var o=0;o<this.width+2;o++){var n=o-1;0===o?n=this.width-1:o===this.width+1&&(n=0),this.world[i][n]&&(this.__oldState[t][o]=this.world[i][n].alive)}}},this.__set_oldState_noWrap=function(){for(var t=1;t<=this.height;t++)for(var i=1;i<=this.width;i++){var o=this.world[t-1][i-1];o&&(this.__oldState[t][i]=o.alive)}},this.tick=function(){if(this.options.wrapOnEdges?this.__set_oldState_withWrap():this.__set_oldState_noWrap(),this.options.enableLastTickInfo)for(var t=0;t<this.height;t++)for(var i=0;i<this.width;i++)this.world[t][i].aliveLastTick=this.world[t][i].alive;for(var o=1;o<=this.height;o++)for(var n=(this.__oldState[o-1][0]?32:0)+(this.__oldState[o-1][1]?4:0)+(this.__oldState[o][0]?16:0)+(this.__oldState[o][1]?2:0)+(this.__oldState[o+1][0]?8:0)+(this.__oldState[o+1][1]?1:0),s=1;s<=this.width;s++)n=n%64*8+(this.__oldState[o-1][s+1]?4:0)+(this.__oldState[o][s+1]?2:0)+(this.__oldState[o+1][s+1]?1:0),this.world[o-1][s-1].alive=this.lookupTable[n]},this.width=this.options.width,this.height=this.options.height,this.__initializeWorld(this.width,this.height)}});\n","import ConwayJs from 'conway-engine'\n\nvar gameSize = { width: 60, height: 20 }\nvar conwayPlayground = document.getElementById('conway-playground');\nconwayPlayground.width = gameSize.width\nconwayPlayground.height = gameSize.height\nconwayPlayground.style.imageRendering = 'pixelated'\nconwayPlayground.style.border = '1px solid #777'\nconwayPlayground.style.marginTop = '10px'\nconwayPlayground.style.width = '270px'\nconwayPlayground.style.height = '90px'\nconwayPlayground.style.verticalAlign = 'bottom'\nconst ctx = conwayPlayground.getContext('2d')\n\nvar game\nfunction createNewGame() {\n    game = new ConwayJs({\n        height: gameSize.height,\n        width: gameSize.width,\n        wrapOnEdges: true,\n        enableLastTickInfo: true\n    })\n    // 2 ticks to avoid flash of cells at the start\n    game.tick()\n    game.tick()\n    ctx.clearRect(0, 0, game.width, game.height)\n    draw()\n}\ndocument.getElementById('conway-playground-reset').addEventListener('click', createNewGame, false)\ndocument.addEventListener('scroll', function() {\n    if (!game && isScrolledIntoView(conwayPlayground)) createNewGame()\n}, false)\nif (isScrolledIntoView(conwayPlayground)) createNewGame()\n\nfunction draw() {\n    ctx.fillStyle = '#333'\n    for (let y = 0; y < game.height; y++) {\n        for (let x = 0; x < game.width; x++) {\n            const cell = game.world[y][x]\n            if (cell.aliveLastTick === cell.alive) continue\n            if (cell.alive) ctx.fillRect(x, y, 1, 1)\n            else ctx.clearRect(x, y, 1, 1)\n        }\n    }\n}\n\nvar fps = 10;\nvar now;\nvar then = Date.now();\nvar interval = 1000 / fps;\nvar delta;\nfunction controlledFPS() {\n    requestAnimationFrame(controlledFPS);\n    now = Date.now();\n    delta = now - then;\n    if (delta > interval) {\n        then = now - (delta % interval);\n        if (game) {\n            game.tick()\n            draw()\n        }\n    }\n}\ncontrolledFPS()\n\nfunction isScrolledIntoView(elem) {\n    var docViewTop = window.scrollY;\n    var docViewBottom = docViewTop + window.innerHeight;\n\n    var elemTop = elem.offsetTop;\n    var elemBottom = elemTop + elem.offsetHeight;\n\n    return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom));\n}"]}